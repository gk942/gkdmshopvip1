<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Nạp tiền</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-start p-6">

  <div class="bg-gray-800 p-6 rounded-lg w-full max-w-lg text-center">
    <h2 class="text-2xl font-bold mb-4">Nạp tiền vào tài khoản</h2>

    <p class="mb-2">Ngân hàng: <strong>MB Bank</strong></p>
    <p class="mb-2">Số tài khoản: <strong>0977049795</strong></p>
    <p class="mb-4">Chủ tài khoản: <strong>Dinh Hong Hanh</strong></p>

    <p class="mb-2">Nội dung chuyển khoản của bạn:</p>
    <p id="uid" class="text-yellow-400 font-bold text-xl mb-4"></p>

    <button onclick="xacNhan()" class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded">Bấm vào đây nếu bạn đã bank</button>
    <p id="msg" class="mt-4 text-sm text-yellow-300"></p>
  </div>

  <script src="firebase.js" type="module"></script>
  <script type="module">
    import { firebaseFunctions, db } from './firebase.js';

    const { push, ref, set } = firebaseFunctions;
    const uid = localStorage.getItem("uid");

    if (!uid) window.location.href = "loginkhach.html";
    document.getElementById("uid").innerText = uid;

    window.xacNhan = async () => {
      const giaoDichRef = push(ref(db, "giaodich"));
      await set(giaoDichRef, {
        uid: uid,
        status: "Đang chờ",
        time: new Date().toLocaleString()
      });
      document.getElementById("msg").innerText = "Giao dịch đang chờ duyệt. Vui lòng đợi admin xác nhận.";
    };
  </script>
</body>
</html>
