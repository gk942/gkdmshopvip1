<!-- Hiển thị danh sách giao dịch -->
<div id="transactions-container"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDBaWDDCkhRa3DQcJBYdznL98GjHmXspuI",
    authDomain: "gkdmshop.firebaseapp.com",
    databaseURL: "https://gkdmshop-default-rtdb.firebaseio.com",
    projectId: "gkdmshop",
    storageBucket: "gkdmshop.appspot.com",
    messagingSenderId: "52437838526",
    appId: "1:52437838526:web:3187795557aa1458190cef",
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const transRef = ref(db, "transactions");

  onValue(transRef, (snapshot) => {
    const data = snapshot.val();
    const container = document.getElementById("transactions-container");
    container.innerHTML = "";

    for (const key in data) {
      const { username, amount, status } = data[key];
      const statusText = status === "approved" ? "✅ Thành công" : "⏳ Đang chờ duyệt";

      container.innerHTML += `
        <div style="margin-bottom:10px;">
          <strong>${username}</strong> nạp <strong>${amount}đ</strong> - <em>${statusText}</em>
        </div>
      `;
    }
  });
</script>
